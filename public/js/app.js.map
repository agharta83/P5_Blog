{"version":3,"sources":["app/js/initialize.js"],"names":["app","init","basePath","$","data","on","login","window","windowScroll","shuffleBlogList","shuffleCommentsList","shuffleUsersList","stickyElements","countAnimation","showEditor","modalResetPassword","showLoginModal","showModalResetPassword","offset","top","addClass","removeClass","location","href","indexOf","myShuffle","Shuffle","document","querySelector","itemSelector","buffer","evt","input","currentTarget","checked","filter","value","rows","each","index","row","getAttribute","hide","show","controller","ScrollMagic","Controller","pins_elem","indexInArray","valueOfElement","Scene","setPin","addTo","count","$this","current","parseInt","html","setTimeout","pathname","trumbowyg","svgPath","previewImg","change","e","preview","innerHTML","file","files","test","name","reader","FileReader","addEventListener","image","Image","width","title","src","result","appendChild","readAsDataURL","label","innerText","modal","trigger"],"mappings":"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","file":"public/js/app.js","sourcesContent":["import Shuffle from 'shufflejs';\nimport ScrollMagic from 'scrollmagic';\n\nvar app = {\n  init : function () {\n    // On récupére le basePath\n    app.basePath = $('body').data('path');\n\n    // Validation du formulaire de connexion\n    $('#connexion').on('submit', app.login);\n\n    // Scroll sur la page pour la barre de navigation\n    $(window).on('scroll', app.windowScroll);\n\n    // Filter blog list\n    $(window).on('load', app.shuffleBlogList);\n\n    // Filter comments list\n    $(window).on('load', app.shuffleCommentsList);\n\n    // Filter users list\n    $(window).on('load', app.shuffleUsersList);\n\n    // Sticky elements\n    $(window).on('scroll', app.stickyElements);\n\n    // Count Animation\n    $(window).on('load', app.countAnimation);\n\n    // TinyMCE\n    $(window).on('load', app.showEditor);\n\n    // Modal Reset password\n    $('#link_reset_password').on('click', app.modalResetPassword);\n\n    // Modal login\n    $(window).on('load', app.showLoginModal);\n\n    // Show Modal Reset Password with errors\n    $(window).on('load', app.showModalResetPassword);\n  },\n\n  // Sticky Menu\n  windowScroll : function() {\n    if ($('.navigation').offset().top > 100) {\n      $('.navigation').addClass('nav-bg');\n    } else {\n      $('.navigation').removeClass('nav_bg');\n    }\n  },\n\n  // Shuffle blog list\n  shuffleBlogList : function () {\n    if (window.location.href.indexOf(\"P5_Blog/blog\") > -1) {\n      var myShuffle = new Shuffle(document.querySelector('.shuffle-wrapper'), {\n        itemSelector: '.shuffle-item',\n        buffer: 1\n      });\n\n      $('input[name=\"shuffle-filter\"]').on('change', function (evt) {\n        var input = evt.currentTarget;\n        if (input.checked) {\n          myShuffle.filter(input.value);\n        }\n      });\n    }\n  },\n\n  // Shuffle comments list\n  shuffleCommentsList : function () {\n    if (window.location.href.indexOf(\"dashboard/comments\") > -1) {\n      $('input[name=\"NotValid\"]').on('change', function (evt) {\n        var input = evt.currentTarget;\n        if (input.checked) {\n          var rows = $('tr[data-groups]');\n\n          rows.each(function (index, row) {\n\n            if (row.getAttribute(\"data-groups\") == \"1\") {\n              $(this).hide();\n            }\n          });\n        }\n      });\n\n      $('input[name=\"all\"]').on('change', function (evt) {\n        var input = evt.currentTarget;\n        if (input.checked) {\n          var rows = $('tr[data-groups]');\n\n          rows.each(function (index, row) {\n            $(this).show();\n\n          });\n        }\n      });\n    }\n  },\n\n  shuffleUsersList : function() {\n    if (window.location.href.indexOf(\"dashboard/users\") > -1) {\n      $('input[name=\"isAdmin\"]').on('change', function (evt) {\n        var input = evt.currentTarget;\n        if (input.checked) {\n          var rows = $('tr[data-groups]');\n\n          rows.each(function (index, row) {\n\n            if (row.getAttribute(\"data-groups\") == '0') {\n              $(this).hide();\n            }\n          });\n        }\n      });\n\n      $('input[name=\"all\"]').on('change', function (evt) {\n        var input = evt.currentTarget;\n        if (input.checked) {\n          var rows = $('tr[data-groups]');\n\n          rows.each(function (index, row) {\n            $(this).show();\n\n          });\n        }\n      });\n    }\n  },\n\n  // Sticky elements (pinning)\n  stickyElements : function() {\n    var controller = new ScrollMagic.Controller();\n\n    var pins_elem = $('.pin-elem');\n\n    $.each(pins_elem, function (indexInArray, valueOfElement) {\n      new ScrollMagic.Scene({\n          offset: 100\n        })\n        .setPin(this)\n        .addTo(controller);\n    });\n  },\n\n  // Admin dashboard count animations\n  count : function($this) {\n    var current = parseInt($this.html(), 10);\n    current = current + 1;\n    $this.html(++current);\n\n    if (current > $this.data('count')) {\n      $this.html($this.data('count'));\n    } else {\n      setTimeout(function () {\n        app.count($this)\n      }, 50);\n    }\n  },\n\n  // Count animation\n  countAnimation : function() {\n    if (window.location.pathname == app.basePath + '/dashboard') {\n      $(\".stat-count\").each(function () {\n        $(this).data('count', parseInt($(this).html(), 10));\n        $(this).html('0');\n        app.count($(this));\n      });\n    }\n\n  },\n\n  // TinyMCE\n  showEditor : function() {\n    if ((window.location.href.indexOf(\"posts/new\") > -1 || window.location.href.indexOf(\"update\") > -1)) {\n      /*\n      tinymce.init({\n        selector: '#new_post_form_chapo',\n        height: '300',\n        plugins: 'a11ychecker advcode casechange formatpainter linkchecker autolink lists checklist media mediaembed pageembed permanentpen powerpaste table advtable tinycomments tinymcespellchecker',\n        toolbar: 'a11ycheck addcomment showcomments casechange checklist code formatpainter pageembed permanentpen table',\n        toolbar_mode: 'floating',\n        tinycomments_mode: 'embedded',\n        tinycomments_author: 'Author name',\n      });\n\n      tinymce.init({\n        selector: '#new_post_form_content',\n        height: '500',\n        plugins: 'a11ychecker advcode casechange formatpainter linkchecker autolink lists checklist media mediaembed pageembed permanentpen powerpaste table advtable tinycomments tinymcespellchecker',\n        toolbar: 'a11ycheck addcomment showcomments casechange checklist code formatpainter pageembed permanentpen table',\n        toolbar_mode: 'floating',\n        tinycomments_mode: 'embedded',\n        tinycomments_author: 'Author name',\n      });\n      */\n\n      $('#new_post_form_chapo').trumbowyg({\n        svgPath: app.basePath + '/public/images/icons.svg',\n      });\n\n      $('#new_post_form_content').trumbowyg({\n        svgPath: app.basePath + '/public/images/icons.svg',\n      });\n\n      app.previewImg;\n    }\n  },\n\n  // Read url IMG on form and preview img\n  previewImg : function () {\n    $('input[type=\"file\"]').change(function (e) {\n\n      var preview = document.querySelector('.wrapper-preview');\n      preview.innerHTML = '';\n      var file = document.querySelector('input[type=file]').files[0];\n\n      if (/\\.(jpe?g|png|gif)$/i.test(file.name)) {\n        var reader = new FileReader();\n\n        reader.addEventListener(\"load\", function () {\n          var image = new Image();\n          image.width = 400;\n          image.title = file.name;\n          image.src = this.result;\n          preview.appendChild(image);\n        }, false);\n\n        reader.readAsDataURL(file);\n      }\n\n      var label = document.querySelector('.custom-file-label');\n      label.innerText = file.name;\n\n    });\n  },\n\n  // Modal reset password\n  modalResetPassword : function() {\n    $('#login').modal('toggle');\n  },\n\n  // Affiche la modale de login\n  showLoginModal : function() {\n    if (window.location.pathname == app.basePath + '/login') {\n      $(\"#modalLogin\").trigger('click');\n    }\n\n  },\n\n  // Affiche la modale de réinitialisation du password avec les erreurs\n  showModalResetPassword : function() {\n    if (window.location.pathname == app.basePath + '/resetPassword') {\n      $(\"#link_reset_password\").trigger('click');\n    }\n  },\n\n}\n\n$(app.init);\n\n"]}