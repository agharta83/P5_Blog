{"version":3,"sources":["app/js/initialize.js"],"names":["app","init","basePath","$","data","on","login","window","windowScroll","shuffleBlogList","shuffleCommentsList","stickyElements","countAnimation","showEditor","modalResetPassword","showLoginModal","showModalResetPassword","offset","top","addClass","removeClass","location","href","indexOf","myShuffle","Shuffle","document","querySelector","itemSelector","buffer","evt","input","currentTarget","checked","filter","value","rows","each","index","row","getAttribute","hide","show","controller","ScrollMagic","Controller","pins_elem","indexInArray","valueOfElement","Scene","setPin","addTo","count","$this","current","parseInt","html","setTimeout","pathname","trumbowyg","svgPath","previewImg","change","e","preview","innerHTML","file","files","test","name","reader","FileReader","addEventListener","image","Image","width","title","src","result","appendChild","readAsDataURL","label","innerText","modal","trigger"],"mappings":"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","file":"public/js/app.js","sourcesContent":["import Shuffle from 'shufflejs';\r\nimport ScrollMagic from 'scrollmagic';\r\n\r\nvar app = {\r\n  init : function () {\r\n    // On récupére le basePath\r\n    app.basePath = $('body').data('path');\r\n\r\n    // Validation du formulaire de connexion\r\n    $('#connexion').on('submit', app.login);\r\n\r\n    // Scroll sur la page pour la barre de navigation\r\n    $(window).on('scroll', app.windowScroll);\r\n\r\n    // Filter blog list\r\n    $(window).on('load', app.shuffleBlogList);\r\n\r\n    // Filter comments list\r\n    $(window).on('load', app.shuffleCommentsList);\r\n\r\n    // Sticky elements\r\n    $(window).on('scroll', app.stickyElements);\r\n\r\n    // Count Animation\r\n    $(window).on('load', app.countAnimation);\r\n\r\n    // TinyMCE\r\n    $(window).on('load', app.showEditor);\r\n\r\n    // Modal Reset password\r\n    $('#link_reset_password').on('click', app.modalResetPassword);\r\n\r\n    // Modal login\r\n    $(window).on('load', app.showLoginModal);\r\n\r\n    // Show Modal Reset Password with errors\r\n    $(window).on('load', app.showModalResetPassword);\r\n  },\r\n\r\n  // Sticky Menu\r\n  windowScroll : function() {\r\n    if ($('.navigation').offset().top > 100) {\r\n      $('.navigation').addClass('nav-bg');\r\n    } else {\r\n      $('.navigation').removeClass('nav_bg');\r\n    }\r\n  },\r\n\r\n  // Shuffle blog list\r\n  shuffleBlogList : function () {\r\n    if (window.location.href.indexOf(\"P5_Blog/blog\") > -1) {\r\n      var myShuffle = new Shuffle(document.querySelector('.shuffle-wrapper'), {\r\n        itemSelector: '.shuffle-item',\r\n        buffer: 1\r\n      });\r\n  \r\n      $('input[name=\"shuffle-filter\"]').on('change', function (evt) {\r\n        var input = evt.currentTarget;\r\n        if (input.checked) {\r\n          myShuffle.filter(input.value);\r\n        }\r\n      });\r\n    }\r\n  },\r\n\r\n  // Shuffle comments list\r\n  shuffleCommentsList : function () {\r\n    if (window.location.href.indexOf(\"dashboard/comments\") > -1) {\r\n      $('input[name=\"NotValid\"]').on('change', function (evt) {\r\n        var input = evt.currentTarget;\r\n        if (input.checked) {\r\n          var rows = $('tr[data-groups]');\r\n  \r\n          rows.each(function (index, row) {\r\n  \r\n            if (row.getAttribute(\"data-groups\") == \"1\") {\r\n              $(this).hide();\r\n            }\r\n          });\r\n        }\r\n      });\r\n  \r\n      $('input[name=\"all\"]').on('change', function (evt) {\r\n        var input = evt.currentTarget;\r\n        if (input.checked) {\r\n          var rows = $('tr[data-groups]');\r\n  \r\n          rows.each(function (index, row) {\r\n            $(this).show();\r\n  \r\n          });\r\n        }\r\n      });\r\n    }\r\n  },\r\n\r\n  // Sticky elements (pinning)\r\n  stickyElements : function() {\r\n    var controller = new ScrollMagic.Controller();\r\n\r\n    var pins_elem = $('.pin-elem');\r\n  \r\n    $.each(pins_elem, function (indexInArray, valueOfElement) {\r\n      new ScrollMagic.Scene({\r\n          offset: 100\r\n        })\r\n        .setPin(this)\r\n        .addTo(controller);\r\n    });\r\n  },\r\n\r\n  // Admin dashboard count animations\r\n  count : function($this) {\r\n    var current = parseInt($this.html(), 10);\r\n    current = current + 1;\r\n    $this.html(++current);\r\n\r\n    if (current > $this.data('count')) {\r\n      $this.html($this.data('count'));\r\n    } else {\r\n      setTimeout(function () {\r\n        app.count($this)\r\n      }, 50);\r\n    }\r\n  },\r\n\r\n  // Count animation\r\n  countAnimation : function() {\r\n    if (window.location.pathname == app.basePath + '/dashboard') {\r\n      $(\".stat-count\").each(function () {\r\n        $(this).data('count', parseInt($(this).html(), 10));\r\n        $(this).html('0');\r\n        app.count($(this));\r\n      });\r\n    }\r\n    \r\n  },\r\n\r\n  // TinyMCE\r\n  showEditor : function() {\r\n    if ((window.location.href.indexOf(\"posts/new\") > -1 || window.location.href.indexOf(\"update\") > -1)) {\r\n      /*\r\n      tinymce.init({\r\n        selector: '#new_post_form_chapo',\r\n        height: '300',\r\n        plugins: 'a11ychecker advcode casechange formatpainter linkchecker autolink lists checklist media mediaembed pageembed permanentpen powerpaste table advtable tinycomments tinymcespellchecker',\r\n        toolbar: 'a11ycheck addcomment showcomments casechange checklist code formatpainter pageembed permanentpen table',\r\n        toolbar_mode: 'floating',\r\n        tinycomments_mode: 'embedded',\r\n        tinycomments_author: 'Author name',\r\n      });\r\n  \r\n      tinymce.init({\r\n        selector: '#new_post_form_content',\r\n        height: '500',\r\n        plugins: 'a11ychecker advcode casechange formatpainter linkchecker autolink lists checklist media mediaembed pageembed permanentpen powerpaste table advtable tinycomments tinymcespellchecker',\r\n        toolbar: 'a11ycheck addcomment showcomments casechange checklist code formatpainter pageembed permanentpen table',\r\n        toolbar_mode: 'floating',\r\n        tinycomments_mode: 'embedded',\r\n        tinycomments_author: 'Author name',\r\n      });\r\n      */\r\n\r\n      $('#new_post_form_chapo').trumbowyg({\r\n        svgPath: app.basePath + '/public/images/icons.svg',\r\n      });\r\n\r\n      $('#new_post_form_content').trumbowyg({\r\n        svgPath: app.basePath + '/public/images/icons.svg',\r\n      });\r\n\r\n      app.previewImg;\r\n    }\r\n  },\r\n\r\n  // Read url IMG on form and preview img\r\n  previewImg : function () {\r\n    $('input[type=\"file\"]').change(function (e) {\r\n\r\n      var preview = document.querySelector('.wrapper-preview');\r\n      preview.innerHTML = '';\r\n      var file = document.querySelector('input[type=file]').files[0];\r\n\r\n      if (/\\.(jpe?g|png|gif)$/i.test(file.name)) {\r\n        var reader = new FileReader();\r\n\r\n        reader.addEventListener(\"load\", function () {\r\n          var image = new Image();\r\n          image.width = 400;\r\n          image.title = file.name;\r\n          image.src = this.result;\r\n          preview.appendChild(image);\r\n        }, false);\r\n\r\n        reader.readAsDataURL(file);\r\n      }\r\n\r\n      var label = document.querySelector('.custom-file-label');\r\n      label.innerText = file.name;\r\n\r\n    });\r\n  },\r\n\r\n  // Modal reset password\r\n  modalResetPassword : function() {\r\n    $('#login').modal('toggle');\r\n  },\r\n\r\n  // Affiche la modale de login\r\n  showLoginModal : function() {\r\n    if (window.location.pathname == app.basePath + '/login') {\r\n      $(\"#modalLogin\").trigger('click');\r\n    }\r\n\r\n  },\r\n\r\n  // Affiche la modale de réinitialisation du password avec les erreurs\r\n  showModalResetPassword : function() {\r\n    if (window.location.pathname == app.basePath + '/resetPassword') {\r\n      $(\"#link_reset_password\").trigger('click');\r\n    }\r\n  },\r\n\r\n}\r\n\r\n$(app.init);\r\n\r\n"]}